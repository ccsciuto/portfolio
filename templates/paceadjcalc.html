<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pace Adjustment Calculator</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <div id="container1">Pace Adjustment Calculator</div>
    <div id="bottom_div2">
        This calculator will adjust goal paces according to different weather variables.
        Enter a specific pace, dew point, and temperature below, and click 'Adjust' to see
        what the corresponding pace will be in the given climate.
    </div>
<hr class="section-divider">
    <form id="paceForm" class="calculator">
        <label>Pace:</label><br>
        <input type="text" id="paceInput" placeholder="10:30"><br>
        <label>Dew Point:</label><br>
        <input type="text" id="dewPointInput" placeholder="65"><br>
        <label>Temperature:</label><br>
        <input type="text" id="tempInput" placeholder="80"><br><br>
        <button type="button" onclick="adjustPace('warmer')">Adjust for Warmer Weather</button>
        <button type="button" onclick="adjustPace('cooler')">Adjust for Cooler Weather</button>
    </form>

    <div id="resultDisplay"></div>

    <script>
        const dict_change = {
            101: 0.05, 102: 0.10, 103: 0.15, 104: 0.20, 105: 0.25, 106: 0.30, 107: 0.35, 108: 0.40, 109: 0.45, 110: 0.50,
            111: 0.55, 112: 0.60, 113: 0.65, 114: 0.70, 115: 0.75, 116: 0.80, 117: 0.85, 118: 0.90, 119: 0.95, 120: 1.00,
            121: 1.10, 122: 1.20, 123: 1.30, 124: 1.40, 125: 1.50, 126: 1.60, 127: 1.70, 128: 1.80, 129: 1.90, 130: 2.00,
            131: 2.10, 132: 2.20, 133: 2.30, 134: 2.40, 135: 2.50, 136: 2.60, 137: 2.70, 138: 2.80, 139: 2.90, 140: 3.00,
            141: 3.15, 142: 3.30, 143: 3.45, 144: 3.60, 145: 3.75, 146: 3.90, 147: 4.05, 148: 4.20, 149: 4.35, 150: 4.50,
            151: 4.65, 152: 4.80, 153: 4.95, 154: 5.10, 155: 5.25, 156: 5.40, 157: 5.55, 158: 5.70, 159: 5.85, 160: 6.00,
            161: 6.20, 162: 6.40, 163: 6.60, 164: 6.80, 165: 7.00, 166: 7.20, 167: 7.40, 168: 7.60, 169: 7.80, 170: 8.00,
            171: 8.20, 172: 8.40, 173: 8.60, 174: 8.80, 175: 9.00, 176: 9.20, 177: 9.40, 178: 9.60, 179: 9.80, 180: 10.00,
            181: 10.20, 182: 10.40, 183: 10.60, 184: 10.80, 185: 11.00, 186: 11.20, 187: 11.40, 188: 11.60, 189: 11.80, 190: 12.00,
            191: 12.20, 192: 12.40, 193: 12.60, 194: 12.80, 195: 13.00, 196: 13.20, 197: 13.40, 198: 13.60, 199: 13.80, 200: 14.00
        };

        function adjustPace(direction) {
            let pace = document.getElementById("paceInput").value;
            let dp = parseFloat(document.getElementById("dewPointInput").value);
            let temp = parseFloat(document.getElementById("tempInput").value);

            if (!pace || isNaN(dp) || isNaN(temp)) {
                document.getElementById("resultDisplay").innerText = "Please enter valid inputs!";
                return;
            }

            let [min, sec] = pace.split(":".toString()).map(Number);
            let totalSeconds = min * 60 + sec;
            let t_dp = Math.round(dp + temp);

            let percent = dict_change[t_dp] || 0;
            let amountChange = (percent + 100) / 100;

            let newPaceSeconds = direction === 'warmer'
                ? totalSeconds * amountChange
                : totalSeconds / amountChange;

            let newMin = Math.floor(newPaceSeconds / 60);
            let newSec = Math.round(newPaceSeconds % 60).toString().padStart(2, "0");

            document.getElementById("resultDisplay").innerText = `The adjusted pace is: ${newMin}:${newSec} /mile`;
        }
    </script>
</body>
<hr class="section-divider">

<section class="sources">
  <h2>Sources & References</h2>
  <ul>
    <li><a href="https://www.runfitmke.com/blog/how-to-calculate-pace-adjustment-for-hot-weather-running" target="_blank">RunFitMKE — How to Calculate Pace Adjustment for Hot Weather Running</a></li>
    <li><a href="https://runsmartonline.com/blog/running-in-the-heat-tips-for-pacing/" target="_blank">RunSmartOnline — Running in the Heat: Tips for Pacing</a></li>
    <li><a href="https://www.wickedbonkproof.com/running-training-tips/-adjusting-pace-for-heat" target="_blank">Wicked Bonk Proof — Adjusting Pace for Heat</a></li>
  </ul>
</section>

</html>
